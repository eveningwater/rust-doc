<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>å¦‚ä½•ç¼–å†™æµ‹è¯• | rustè¯­è¨€ä¸­æ–‡æ–‡æ¡£</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/rust-doc/logo.svg">
    <script type="text/javascript" src="https://fastly.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/autoload.js"></script>
    <meta name="description" content="ä¸€é—¨èµ‹äºˆæ¯ä¸ªäººæ„å»ºå¯é ä¸”é«˜æ•ˆè½¯ä»¶èƒ½åŠ›çš„è¯­è¨€ã€‚">
    
    <link rel="preload" href="/rust-doc/assets/css/0.styles.b04b0b2c.css" as="style"><link rel="preload" href="/rust-doc/assets/js/app.c04a1235.js" as="script"><link rel="preload" href="/rust-doc/assets/js/2.0b9595c3.js" as="script"><link rel="preload" href="/rust-doc/assets/js/1.c1c7d747.js" as="script"><link rel="preload" href="/rust-doc/assets/js/73.abc9fbc0.js" as="script"><link rel="prefetch" href="/rust-doc/assets/js/10.ecfc1310.js"><link rel="prefetch" href="/rust-doc/assets/js/11.8ce27df2.js"><link rel="prefetch" href="/rust-doc/assets/js/12.e8a24093.js"><link rel="prefetch" href="/rust-doc/assets/js/13.8c63006f.js"><link rel="prefetch" href="/rust-doc/assets/js/14.2f737803.js"><link rel="prefetch" href="/rust-doc/assets/js/15.e953de2c.js"><link rel="prefetch" href="/rust-doc/assets/js/16.1585a3c7.js"><link rel="prefetch" href="/rust-doc/assets/js/17.2435f518.js"><link rel="prefetch" href="/rust-doc/assets/js/18.967f6c8c.js"><link rel="prefetch" href="/rust-doc/assets/js/19.dafc4e8b.js"><link rel="prefetch" href="/rust-doc/assets/js/20.6d69020f.js"><link rel="prefetch" href="/rust-doc/assets/js/21.4fc9b1bd.js"><link rel="prefetch" href="/rust-doc/assets/js/22.a565103a.js"><link rel="prefetch" href="/rust-doc/assets/js/23.67d5517c.js"><link rel="prefetch" href="/rust-doc/assets/js/24.bd829c71.js"><link rel="prefetch" href="/rust-doc/assets/js/25.7ea1520a.js"><link rel="prefetch" href="/rust-doc/assets/js/26.a8eb10ff.js"><link rel="prefetch" href="/rust-doc/assets/js/27.9f405629.js"><link rel="prefetch" href="/rust-doc/assets/js/28.d51f1675.js"><link rel="prefetch" href="/rust-doc/assets/js/29.35f10626.js"><link rel="prefetch" href="/rust-doc/assets/js/3.008fbeae.js"><link rel="prefetch" href="/rust-doc/assets/js/30.e0111f74.js"><link rel="prefetch" href="/rust-doc/assets/js/31.09c293f3.js"><link rel="prefetch" href="/rust-doc/assets/js/32.e38e8de5.js"><link rel="prefetch" href="/rust-doc/assets/js/33.d7ba6059.js"><link rel="prefetch" href="/rust-doc/assets/js/34.2c4e4e30.js"><link rel="prefetch" href="/rust-doc/assets/js/35.83da703e.js"><link rel="prefetch" href="/rust-doc/assets/js/36.4d650a7b.js"><link rel="prefetch" href="/rust-doc/assets/js/37.dd8e3d5a.js"><link rel="prefetch" href="/rust-doc/assets/js/38.137375eb.js"><link rel="prefetch" href="/rust-doc/assets/js/39.4d00e660.js"><link rel="prefetch" href="/rust-doc/assets/js/4.2713a537.js"><link rel="prefetch" href="/rust-doc/assets/js/40.1f2cde08.js"><link rel="prefetch" href="/rust-doc/assets/js/41.d198018c.js"><link rel="prefetch" href="/rust-doc/assets/js/42.c1fb4dd0.js"><link rel="prefetch" href="/rust-doc/assets/js/43.6f19c6c6.js"><link rel="prefetch" href="/rust-doc/assets/js/44.70cdb6d8.js"><link rel="prefetch" href="/rust-doc/assets/js/45.77f078ae.js"><link rel="prefetch" href="/rust-doc/assets/js/46.8c51f88d.js"><link rel="prefetch" href="/rust-doc/assets/js/47.580fa293.js"><link rel="prefetch" href="/rust-doc/assets/js/48.0e790d51.js"><link rel="prefetch" href="/rust-doc/assets/js/49.a3c2a880.js"><link rel="prefetch" href="/rust-doc/assets/js/5.dd9e9fb1.js"><link rel="prefetch" href="/rust-doc/assets/js/50.a241c6d0.js"><link rel="prefetch" href="/rust-doc/assets/js/51.a09b1abd.js"><link rel="prefetch" href="/rust-doc/assets/js/52.acfbaa85.js"><link rel="prefetch" href="/rust-doc/assets/js/53.8c61a3ca.js"><link rel="prefetch" href="/rust-doc/assets/js/54.e91fdf29.js"><link rel="prefetch" href="/rust-doc/assets/js/55.dcaf8f1f.js"><link rel="prefetch" href="/rust-doc/assets/js/56.9b5cb478.js"><link rel="prefetch" href="/rust-doc/assets/js/57.f77d6756.js"><link rel="prefetch" href="/rust-doc/assets/js/58.29008c3b.js"><link rel="prefetch" href="/rust-doc/assets/js/59.26eefe35.js"><link rel="prefetch" href="/rust-doc/assets/js/6.51c20ddf.js"><link rel="prefetch" href="/rust-doc/assets/js/60.4ea186c9.js"><link rel="prefetch" href="/rust-doc/assets/js/61.a99b78e4.js"><link rel="prefetch" href="/rust-doc/assets/js/62.a7fca8a8.js"><link rel="prefetch" href="/rust-doc/assets/js/63.cd99bae4.js"><link rel="prefetch" href="/rust-doc/assets/js/64.6618132e.js"><link rel="prefetch" href="/rust-doc/assets/js/65.3fd48e27.js"><link rel="prefetch" href="/rust-doc/assets/js/66.b1b2e9e5.js"><link rel="prefetch" href="/rust-doc/assets/js/67.5b39558f.js"><link rel="prefetch" href="/rust-doc/assets/js/68.2cc9b0d5.js"><link rel="prefetch" href="/rust-doc/assets/js/69.bd491243.js"><link rel="prefetch" href="/rust-doc/assets/js/7.a5b3ba1a.js"><link rel="prefetch" href="/rust-doc/assets/js/70.d7c0f7b0.js"><link rel="prefetch" href="/rust-doc/assets/js/71.8bb32b01.js"><link rel="prefetch" href="/rust-doc/assets/js/72.a6374cb8.js"><link rel="prefetch" href="/rust-doc/assets/js/74.67d7d505.js"><link rel="prefetch" href="/rust-doc/assets/js/vendors~docsearch.a07464bc.js">
    <link rel="stylesheet" href="/rust-doc/assets/css/0.styles.b04b0b2c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/rust-doc/" class="home-link router-link-active"><!----> <span class="site-name">rustè¯­è¨€ä¸­æ–‡æ–‡æ¡£</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/rust-doc/" class="nav-link">
  é¦–é¡µ
</a></div><div class="nav-item"><a href="https://github.com/eveningwater/rust-doc" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://gitee.com/eveningwater" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ç äº‘
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/rust-doc/" class="nav-link">
  é¦–é¡µ
</a></div><div class="nav-item"><a href="https://github.com/eveningwater/rust-doc" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://gitee.com/eveningwater" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ç äº‘
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/rust-doc/doc/introduce/introduce.html" class="sidebar-link">Rustä»‹ç»</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/rust-doc/doc/getting-started/getting-started" class="sidebar-heading clickable"><span>å…¥é—¨</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/rust-doc/doc/guess-game/guess-game.html" class="sidebar-link">çŒœä¸€çŒœæ¸¸æˆ</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/rust-doc/doc/common-concept/common-concept" class="sidebar-heading clickable"><span>å¸¸ç”¨çš„ç¼–ç¨‹æ¦‚å¿µ</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/rust-doc/doc/understand-ownership/understand-ownership" class="sidebar-heading clickable"><span>è®¤è¯†æ‰€æœ‰æƒ</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/rust-doc/doc/structs/structs" class="sidebar-heading clickable"><span>ä½¿ç”¨ç»“æ„ä½“æ¥æ„é€ ç›¸å…³æ•°æ®</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/rust-doc/doc/enums/enums" class="sidebar-heading clickable"><span>æšä¸¾</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/rust-doc/doc/packages-crates-and-modules/packages-crates-and-modules" class="sidebar-heading clickable"><span>ä½¿ç”¨åŒ…ã€ä¾èµ–ç®±å’Œæ¨¡å—ç®¡ç†ä¸æ–­å¢é•¿çš„é¡¹ç›®</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/rust-doc/doc/common-collections/common-collections" class="sidebar-heading clickable"><span>å¸¸ç”¨é›†åˆ</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/rust-doc/doc/error-handling/error-handling" class="sidebar-heading clickable"><span>é”™è¯¯å¤„ç†</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/rust-doc/doc/generics/generics" class="sidebar-heading clickable"><span>æ³›å‹ç±»å‹ã€ç‰¹æ€§å’Œç”Ÿå‘½å‘¨æœŸ</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/rust-doc/doc/testing/testing" class="sidebar-heading clickable open"><span>æµ‹è¯•</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/rust-doc/doc/testing/writing-tests.html" aria-current="page" class="active sidebar-link">ç¼–å†™æµ‹è¯•</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/rust-doc/doc/testing/writing-tests.html#å¦‚ä½•ç¼–å†™æµ‹è¯•" class="sidebar-link">å¦‚ä½•ç¼–å†™æµ‹è¯•</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>é™„å½•</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="å¦‚ä½•ç¼–å†™æµ‹è¯•"><a href="#å¦‚ä½•ç¼–å†™æµ‹è¯•" class="header-anchor">#</a> å¦‚ä½•ç¼–å†™æµ‹è¯•</h2> <p>æµ‹è¯•æ˜¯ Rust å‡½æ•°ï¼Œç”¨äºéªŒè¯éæµ‹è¯•ä»£ç æ˜¯å¦æŒ‰é¢„æœŸæ–¹å¼è¿è¡Œã€‚æµ‹è¯•å‡½æ•°çš„ä¸»ä½“é€šå¸¸æ‰§è¡Œä»¥ä¸‹ä¸‰ä¸ªæ“ä½œï¼š</p> <ul><li>è®¾ç½®æ‰€éœ€çš„æ•°æ®æˆ–çŠ¶æ€ã€‚</li> <li>è¿è¡Œè¦æµ‹è¯•çš„ä»£ç ã€‚</li> <li>æ–­è¨€ç»“æœç¬¦åˆé¢„æœŸã€‚</li></ul> <p>è®©æˆ‘ä»¬çœ‹çœ‹ Rust ä¸“é—¨ä¸ºç¼–å†™æ‰§è¡Œè¿™äº›æ“ä½œçš„æµ‹è¯•æä¾›çš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬ test å±æ€§ã€ä¸€äº›å®å’Œ should_panic å±æ€§ã€‚</p> <h3 id="æµ‹è¯•å‡½æ•°çš„å‰–æ"><a href="#æµ‹è¯•å‡½æ•°çš„å‰–æ" class="header-anchor">#</a> æµ‹è¯•å‡½æ•°çš„å‰–æ</h3> <p>æœ€ç®€å•åœ°è¯´ï¼ŒRust ä¸­çš„æµ‹è¯•æ˜¯ä¸€ä¸ªå¸¦æœ‰ test å±æ€§æ ‡æ³¨çš„å‡½æ•°ã€‚å±æ€§æ˜¯å…³äº Rust ä»£ç ç‰‡æ®µçš„å…ƒæ•°æ®ï¼›ä¸€ä¸ªä¾‹å­æ˜¯æˆ‘ä»¬åœ¨ç¬¬ 5 ç« ä¸­ä¸ç»“æ„ä½“ä¸€èµ·ä½¿ç”¨çš„ derive å±æ€§ã€‚è¦å°†å‡½æ•°è½¬å˜ä¸ºæµ‹è¯•å‡½æ•°ï¼Œè¯·åœ¨ fn ä¹‹å‰çš„è¡Œä¸Šæ·»åŠ  #[test]ã€‚å½“ä½ ä½¿ç”¨ cargo test å‘½ä»¤è¿è¡Œæµ‹è¯•æ—¶ï¼ŒRust ä¼šæ„å»ºä¸€ä¸ªæµ‹è¯•è¿è¡Œå™¨äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå®ƒä¼šè¿è¡Œå¸¦æ³¨è§£çš„å‡½æ•°å¹¶æŠ¥å‘Šæ¯ä¸ªæµ‹è¯•å‡½æ•°æ˜¯é€šè¿‡è¿˜æ˜¯å¤±è´¥ã€‚</p> <p>æ¯å½“æˆ‘ä»¬ä½¿ç”¨ Cargo åˆ›å»ºä¸€ä¸ªæ–°çš„åº“é¡¹ç›®æ—¶ï¼Œä¼šè‡ªåŠ¨ä¸ºæˆ‘ä»¬ç”Ÿæˆä¸€ä¸ªåŒ…å«æµ‹è¯•å‡½æ•°çš„æµ‹è¯•æ¨¡å—ã€‚è¿™ä¸ªæ¨¡å—ä¸ºä½ æä¾›äº†ç¼–å†™æµ‹è¯•çš„æ¨¡æ¿ï¼Œè¿™æ ·ä½ å°±ä¸å¿…åœ¨æ¯æ¬¡å¼€å§‹æ–°é¡¹ç›®æ—¶æŸ¥æ‰¾ç¡®åˆ‡çš„ç»“æ„å’Œè¯­æ³•ã€‚ä½ å¯ä»¥æ·»åŠ ä»»æ„æ•°é‡çš„é¢å¤–æµ‹è¯•å‡½æ•°å’Œæµ‹è¯•æ¨¡å—ï¼</p> <p>åœ¨æˆ‘ä»¬å®é™…æµ‹è¯•ä»»ä½•ä»£ç ä¹‹å‰ï¼Œæˆ‘ä»¬å°†é€šè¿‡å®éªŒæ¨¡æ¿æµ‹è¯•æ¥æ¢ç´¢æµ‹è¯•çš„å·¥ä½œåŸç†çš„ä¸€äº›æ–¹é¢ã€‚ç„¶åæˆ‘ä»¬å°†ç¼–å†™ä¸€äº›çœŸå®ä¸–ç•Œçš„æµ‹è¯•ï¼Œè°ƒç”¨æˆ‘ä»¬ç¼–å†™çš„ä»£ç å¹¶æ–­è¨€å…¶è¡Œä¸ºæ˜¯æ­£ç¡®çš„ã€‚</p> <p>è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåä¸º adder çš„æ–°åº“é¡¹ç›®ï¼Œå®ƒå°†å¯¹ä¸¤ä¸ªæ•°å­—è¿›è¡Œç›¸åŠ ï¼š</p> <div class="language-rust extra-class"><pre class="language-rust"><code>$ cargo new adder <span class="token operator">-</span><span class="token operator">-</span>lib
     <span class="token class-name">Created</span> library `adder` project
$ cd adder
</code></pre></div><p>adder åº“ä¸­ src/lib.rs æ–‡ä»¶çš„å†…å®¹åº”è¯¥å¦‚æ¸…å• 11-1 æ‰€ç¤ºã€‚</p> <p>æ–‡ä»¶åï¼šsrc/lib.rsï¼š</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">add</span><span class="token punctuation">(</span>left<span class="token punctuation">:</span> <span class="token keyword">u64</span><span class="token punctuation">,</span> right<span class="token punctuation">:</span> <span class="token keyword">u64</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token keyword">u64</span> <span class="token punctuation">{</span>
    left <span class="token operator">+</span> right
<span class="token punctuation">}</span>

<span class="token attribute attr-name">#[cfg(test)]</span>
<span class="token keyword">mod</span> <span class="token module-declaration namespace">tests</span> <span class="token punctuation">{</span>
    <span class="token keyword">use</span> <span class="token keyword">super</span><span class="token punctuation">::</span><span class="token operator">*</span><span class="token punctuation">;</span>

    <span class="token attribute attr-name">#[test]</span>
    <span class="token keyword">fn</span> <span class="token function-definition function">it_works</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token macro property">assert_eq!</span><span class="token punctuation">(</span>result<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æ¸…å• 11-1ï¼š<code>cargo new</code> è‡ªåŠ¨ç”Ÿæˆçš„ä»£ç </p> <p>è¯¥æ–‡ä»¶ä»¥ä¸€ä¸ªç¤ºä¾‹ add å‡½æ•°å¼€å§‹ï¼Œè¿™æ ·æˆ‘ä»¬å°±æœ‰ä¸œè¥¿å¯ä»¥æµ‹è¯•ã€‚</p> <p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬åªå…³æ³¨ it_works å‡½æ•°ã€‚æ³¨æ„ #[test] æ³¨è§£ï¼šè¿™ä¸ªå±æ€§è¡¨æ˜è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•å‡½æ•°ï¼Œæ‰€ä»¥æµ‹è¯•è¿è¡Œå™¨çŸ¥é“å°†æ­¤å‡½æ•°è§†ä¸ºæµ‹è¯•ã€‚æˆ‘ä»¬ä¹Ÿå¯èƒ½åœ¨ tests æ¨¡å—ä¸­æœ‰éæµ‹è¯•å‡½æ•°æ¥å¸®åŠ©è®¾ç½®å¸¸è§åœºæ™¯æˆ–æ‰§è¡Œå¸¸è§æ“ä½œï¼Œæ‰€ä»¥æˆ‘ä»¬æ€»æ˜¯éœ€è¦æŒ‡æ˜å“ªäº›å‡½æ•°æ˜¯æµ‹è¯•ã€‚</p> <p>ç¤ºä¾‹å‡½æ•°ä½“ä½¿ç”¨ assert_eq! å®æ¥æ–­è¨€ resultï¼ˆåŒ…å«è°ƒç”¨ add å‡½æ•°ä¼ å…¥ 2 å’Œ 2 çš„ç»“æœï¼‰ç­‰äº 4ã€‚è¿™ä¸ªæ–­è¨€ä½œä¸ºå…¸å‹æµ‹è¯•æ ¼å¼çš„ç¤ºä¾‹ã€‚è®©æˆ‘ä»¬è¿è¡Œå®ƒï¼Œçœ‹çœ‹è¿™ä¸ªæµ‹è¯•æ˜¯å¦é€šè¿‡ã€‚</p> <p><code>cargo test</code> å‘½ä»¤è¿è¡Œé¡¹ç›®ä¸­çš„æ‰€æœ‰æµ‹è¯•ï¼Œå¦‚æ¸…å• 11-2 æ‰€ç¤ºã€‚</p> <div class="language-rust extra-class"><pre class="language-rust"><code>$ cargo test
   <span class="token class-name">Compiling</span> adder v0<span class="token number">.1</span><span class="token punctuation">.</span><span class="token number">0</span> <span class="token punctuation">(</span>file<span class="token punctuation">:</span><span class="token operator">/</span><span class="token comment">//projects/adder)</span>
    <span class="token class-name">Finished</span> `test` profile <span class="token punctuation">[</span>unoptimized <span class="token operator">+</span> debuginfo<span class="token punctuation">]</span> <span class="token function">target</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token number">0</span><span class="token punctuation">.</span>57s
     <span class="token class-name">Running</span> unittests src<span class="token operator">/</span>lib<span class="token punctuation">.</span><span class="token function">rs</span> <span class="token punctuation">(</span>file<span class="token punctuation">:</span><span class="token operator">/</span><span class="token comment">//projects/adder/target/debug/deps/adder-7acb243c25ffd9dc)</span>

running <span class="token number">1</span> test
test <span class="token namespace">tests<span class="token punctuation">::</span></span>it_works <span class="token punctuation">...</span> ok

test result<span class="token punctuation">:</span> ok<span class="token punctuation">.</span> <span class="token number">1</span> passed<span class="token punctuation">;</span> <span class="token number">0</span> failed<span class="token punctuation">;</span> <span class="token number">0</span> ignored<span class="token punctuation">;</span> <span class="token number">0</span> measured<span class="token punctuation">;</span> <span class="token number">0</span> filtered out<span class="token punctuation">;</span> finished <span class="token keyword">in</span> <span class="token number">0</span><span class="token punctuation">.</span>00s

   <span class="token class-name">Doc</span><span class="token operator">-</span>tests adder

running <span class="token number">0</span> tests

test result<span class="token punctuation">:</span> ok<span class="token punctuation">.</span> <span class="token number">0</span> passed<span class="token punctuation">;</span> <span class="token number">0</span> failed<span class="token punctuation">;</span> <span class="token number">0</span> ignored<span class="token punctuation">;</span> <span class="token number">0</span> measured<span class="token punctuation">;</span> <span class="token number">0</span> filtered out<span class="token punctuation">;</span> finished <span class="token keyword">in</span> <span class="token number">0</span><span class="token punctuation">.</span>00s
</code></pre></div><p>æ¸…å• 11-2ï¼šè¿è¡Œè‡ªåŠ¨ç”Ÿæˆçš„æµ‹è¯•çš„è¾“å‡º</p> <p>Cargo ç¼–è¯‘å¹¶è¿è¡Œäº†æµ‹è¯•ã€‚æˆ‘ä»¬çœ‹åˆ° running 1 test è¿™ä¸€è¡Œã€‚ä¸‹ä¸€è¡Œæ˜¾ç¤ºç”Ÿæˆçš„æµ‹è¯•å‡½æ•°çš„åç§°ï¼Œç§°ä¸º tests::it_worksï¼Œä»¥åŠè¿è¡Œè¯¥æµ‹è¯•çš„ç»“æœæ˜¯ okã€‚æ€»ä½“æµ‹è¯•ç»“æœæ‘˜è¦ test result: ok. è¡¨ç¤ºæ‰€æœ‰æµ‹è¯•éƒ½é€šè¿‡äº†ï¼Œè€Œè¯»ä½œ 1 passed; 0 failed çš„éƒ¨åˆ†ç»Ÿè®¡äº†é€šè¿‡æˆ–å¤±è´¥çš„æµ‹è¯•æ•°é‡ã€‚</p> <p>å¯ä»¥å°†æµ‹è¯•æ ‡è®°ä¸ºå¿½ç•¥ï¼Œè¿™æ ·å®ƒå°±ä¸ä¼šåœ¨ç‰¹å®šå®ä¾‹ä¸­è¿è¡Œï¼›æˆ‘ä»¬å°†åœ¨æœ¬ç« åé¢çš„&quot;é™¤éç‰¹åˆ«è¯·æ±‚ï¼Œå¦åˆ™å¿½ç•¥æŸäº›æµ‹è¯•&quot;éƒ¨åˆ†ä¸­ä»‹ç»è¿™ä¸€ç‚¹ã€‚å› ä¸ºæˆ‘ä»¬åœ¨è¿™é‡Œæ²¡æœ‰è¿™æ ·åšï¼Œæ‰€ä»¥æ‘˜è¦æ˜¾ç¤º 0 ignoredã€‚</p> <p>0 measured ç»Ÿè®¡æ•°æ®ç”¨äºåŸºå‡†æµ‹è¯•ï¼Œæµ‹é‡æ€§èƒ½ã€‚åŸºå‡†æµ‹è¯•åœ¨æ’°å†™æœ¬æ–‡æ—¶ä»…åœ¨ nightly Rust ä¸­å¯ç”¨ã€‚æœ‰å…³åŸºå‡†æµ‹è¯•çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…ç›¸å…³æ–‡æ¡£ã€‚</p> <p>æˆ‘ä»¬å¯ä»¥å‘ cargo test å‘½ä»¤ä¼ é€’å‚æ•°ï¼Œåªè¿è¡Œåç§°åŒ¹é…å­—ç¬¦ä¸²çš„æµ‹è¯•ï¼›è¿™ç§°ä¸ºè¿‡æ»¤ï¼Œæˆ‘ä»¬å°†åœ¨&quot;æŒ‰åç§°è¿è¡Œæµ‹è¯•å­é›†&quot;éƒ¨åˆ†ä¸­ä»‹ç»ã€‚è¿™é‡Œæˆ‘ä»¬æ²¡æœ‰è¿‡æ»¤æ­£åœ¨è¿è¡Œçš„æµ‹è¯•ï¼Œæ‰€ä»¥æ‘˜è¦æœ«å°¾æ˜¾ç¤º 0 filtered outã€‚</p> <p>æµ‹è¯•è¾“å‡ºçš„ä¸‹ä¸€éƒ¨åˆ†ä» Doc-tests adder å¼€å§‹ï¼Œæ˜¯ä»»ä½•æ–‡æ¡£æµ‹è¯•çš„ç»“æœã€‚æˆ‘ä»¬è¿˜æ²¡æœ‰ä»»ä½•æ–‡æ¡£æµ‹è¯•ï¼Œä½† Rust å¯ä»¥ç¼–è¯‘å‡ºç°åœ¨æˆ‘ä»¬ API æ–‡æ¡£ä¸­çš„ä»»ä½•ä»£ç ç¤ºä¾‹ã€‚è¿™ä¸ªåŠŸèƒ½æœ‰åŠ©äºä¿æŒæ–‡æ¡£å’Œä»£ç åŒæ­¥ï¼æˆ‘ä»¬å°†åœ¨ç¬¬ 14 ç« çš„&quot;æ–‡æ¡£æ³¨é‡Šä½œä¸ºæµ‹è¯•&quot;éƒ¨åˆ†è®¨è®ºå¦‚ä½•ç¼–å†™æ–‡æ¡£æµ‹è¯•ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å°†å¿½ç•¥ Doc-tests è¾“å‡ºã€‚</p> <p>è®©æˆ‘ä»¬å¼€å§‹æ ¹æ®è‡ªå·±çš„éœ€æ±‚å®šåˆ¶æµ‹è¯•ã€‚é¦–å…ˆï¼Œå°† it_works å‡½æ•°çš„åç§°æ›´æ”¹ä¸ºä¸åŒçš„åç§°ï¼Œä¾‹å¦‚ explorationï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p> <p>æ–‡ä»¶åï¼šsrc/lib.rsï¼š</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">add</span><span class="token punctuation">(</span>left<span class="token punctuation">:</span> <span class="token keyword">u64</span><span class="token punctuation">,</span> right<span class="token punctuation">:</span> <span class="token keyword">u64</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token keyword">u64</span> <span class="token punctuation">{</span>
    left <span class="token operator">+</span> right
<span class="token punctuation">}</span>

<span class="token attribute attr-name">#[cfg(test)]</span>
<span class="token keyword">mod</span> <span class="token module-declaration namespace">tests</span> <span class="token punctuation">{</span>
    <span class="token keyword">use</span> <span class="token keyword">super</span><span class="token punctuation">::</span><span class="token operator">*</span><span class="token punctuation">;</span>

    <span class="token attribute attr-name">#[test]</span>
    <span class="token keyword">fn</span> <span class="token function-definition function">exploration</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token macro property">assert_eq!</span><span class="token punctuation">(</span>result<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç„¶åå†æ¬¡è¿è¡Œ cargo testã€‚è¾“å‡ºç°åœ¨æ˜¾ç¤º exploration è€Œä¸æ˜¯ it_worksï¼š</p> <div class="language-rust extra-class"><pre class="language-rust"><code>$ cargo test
   <span class="token class-name">Compiling</span> adder v0<span class="token number">.1</span><span class="token punctuation">.</span><span class="token number">0</span> <span class="token punctuation">(</span>file<span class="token punctuation">:</span><span class="token operator">/</span><span class="token comment">//projects/adder)</span>
    <span class="token class-name">Finished</span> `test` profile <span class="token punctuation">[</span>unoptimized <span class="token operator">+</span> debuginfo<span class="token punctuation">]</span> <span class="token function">target</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token number">0</span><span class="token punctuation">.</span>59s
     <span class="token class-name">Running</span> unittests src<span class="token operator">/</span>lib<span class="token punctuation">.</span><span class="token function">rs</span> <span class="token punctuation">(</span>target<span class="token operator">/</span>debug<span class="token operator">/</span>deps<span class="token operator">/</span>adder<span class="token operator">-</span>92948b65e88960b4<span class="token punctuation">)</span>

running <span class="token number">1</span> test
test <span class="token namespace">tests<span class="token punctuation">::</span></span>exploration <span class="token punctuation">...</span> ok

test result<span class="token punctuation">:</span> ok<span class="token punctuation">.</span> <span class="token number">1</span> passed<span class="token punctuation">;</span> <span class="token number">0</span> failed<span class="token punctuation">;</span> <span class="token number">0</span> ignored<span class="token punctuation">;</span> <span class="token number">0</span> measured<span class="token punctuation">;</span> <span class="token number">0</span> filtered out<span class="token punctuation">;</span> finished <span class="token keyword">in</span> <span class="token number">0</span><span class="token punctuation">.</span>00s

   <span class="token class-name">Doc</span><span class="token operator">-</span>tests adder

running <span class="token number">0</span> tests

test result<span class="token punctuation">:</span> ok<span class="token punctuation">.</span> <span class="token number">0</span> passed<span class="token punctuation">;</span> <span class="token number">0</span> failed<span class="token punctuation">;</span> <span class="token number">0</span> ignored<span class="token punctuation">;</span> <span class="token number">0</span> measured<span class="token punctuation">;</span> <span class="token number">0</span> filtered out<span class="token punctuation">;</span> finished <span class="token keyword">in</span> <span class="token number">0</span><span class="token punctuation">.</span>00s

</code></pre></div><p>ç°åœ¨æˆ‘ä»¬å°†æ·»åŠ å¦ä¸€ä¸ªæµ‹è¯•ï¼Œä½†è¿™æ¬¡æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªå¤±è´¥çš„æµ‹è¯•ï¼å½“æµ‹è¯•å‡½æ•°ä¸­çš„æŸäº›å†…å®¹å‘ç”Ÿ panic æ—¶ï¼Œæµ‹è¯•å°±ä¼šå¤±è´¥ã€‚æ¯ä¸ªæµ‹è¯•éƒ½åœ¨ä¸€ä¸ªæ–°çº¿ç¨‹ä¸­è¿è¡Œï¼Œå½“ä¸»çº¿ç¨‹çœ‹åˆ°æµ‹è¯•çº¿ç¨‹å·²æ­»äº¡æ—¶ï¼Œæµ‹è¯•è¢«æ ‡è®°ä¸ºå¤±è´¥ã€‚åœ¨ç¬¬ 9 ç« ä¸­ï¼Œæˆ‘ä»¬è®¨è®ºäº†æœ€ç®€å•çš„ panic æ–¹å¼æ˜¯è°ƒç”¨ panic! å®ã€‚å°†æ–°æµ‹è¯•ä½œä¸ºåä¸º another çš„å‡½æ•°è¾“å…¥ï¼Œä½¿ä½ çš„ src/lib.rs æ–‡ä»¶çœ‹èµ·æ¥åƒæ¸…å• 11-3ã€‚</p> <p>æ–‡ä»¶åï¼šsrc/lib.rsï¼š</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">add</span><span class="token punctuation">(</span>left<span class="token punctuation">:</span> <span class="token keyword">u64</span><span class="token punctuation">,</span> right<span class="token punctuation">:</span> <span class="token keyword">u64</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token keyword">u64</span> <span class="token punctuation">{</span>
    left <span class="token operator">+</span> right
<span class="token punctuation">}</span>

<span class="token attribute attr-name">#[cfg(test)]</span>
<span class="token keyword">mod</span> <span class="token module-declaration namespace">tests</span> <span class="token punctuation">{</span>
    <span class="token keyword">use</span> <span class="token keyword">super</span><span class="token punctuation">::</span><span class="token operator">*</span><span class="token punctuation">;</span>

    <span class="token attribute attr-name">#[test]</span>
    <span class="token keyword">fn</span> <span class="token function-definition function">exploration</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token macro property">assert_eq!</span><span class="token punctuation">(</span>result<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token attribute attr-name">#[test]</span>
    <span class="token keyword">fn</span> <span class="token function-definition function">another</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token macro property">panic!</span><span class="token punctuation">(</span><span class="token string">&quot;Make this test fail&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æ¸…å• 11-3ï¼šæ·»åŠ ç¬¬äºŒä¸ªæµ‹è¯•ï¼Œç”±äºæˆ‘ä»¬è°ƒç”¨äº† panic! å®è€Œå¤±è´¥</p> <p>å†æ¬¡ä½¿ç”¨ cargo test è¿è¡Œæµ‹è¯•ã€‚è¾“å‡ºåº”è¯¥å¦‚æ¸…å• 11-4 æ‰€ç¤ºï¼Œè¡¨æ˜æˆ‘ä»¬çš„ exploration æµ‹è¯•é€šè¿‡ï¼Œanother æµ‹è¯•å¤±è´¥ã€‚</p> <div class="language-rust extra-class"><pre class="language-rust"><code>$ cargo test
   <span class="token class-name">Compiling</span> adder v0<span class="token number">.1</span><span class="token punctuation">.</span><span class="token number">0</span> <span class="token punctuation">(</span>file<span class="token punctuation">:</span><span class="token operator">/</span><span class="token comment">//projects/adder)</span>
    <span class="token class-name">Finished</span> `test` profile <span class="token punctuation">[</span>unoptimized <span class="token operator">+</span> debuginfo<span class="token punctuation">]</span> <span class="token function">target</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token number">0</span><span class="token punctuation">.</span>72s
     <span class="token class-name">Running</span> unittests src<span class="token operator">/</span>lib<span class="token punctuation">.</span><span class="token function">rs</span> <span class="token punctuation">(</span>target<span class="token operator">/</span>debug<span class="token operator">/</span>deps<span class="token operator">/</span>adder<span class="token operator">-</span>92948b65e88960b4<span class="token punctuation">)</span>

running <span class="token number">2</span> tests
test <span class="token namespace">tests<span class="token punctuation">::</span></span>another <span class="token punctuation">...</span> <span class="token constant">FAILED</span>
test <span class="token namespace">tests<span class="token punctuation">::</span></span>exploration <span class="token punctuation">...</span> ok

failures<span class="token punctuation">:</span>

<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span> <span class="token namespace">tests<span class="token punctuation">::</span></span>another stdout <span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
thread <span class="token lifetime-annotation symbol">'tests</span><span class="token punctuation">::</span>another' panicked at src<span class="token operator">/</span>lib<span class="token punctuation">.</span>rs<span class="token punctuation">:</span><span class="token number">17</span><span class="token punctuation">:</span><span class="token number">9</span><span class="token punctuation">:</span>
<span class="token class-name">Make</span> this test fail
note<span class="token punctuation">:</span> run with `<span class="token constant">RUST_BACKTRACE</span><span class="token operator">=</span><span class="token number">1</span>` environment variable to display a backtrace


failures<span class="token punctuation">:</span>
    <span class="token namespace">tests<span class="token punctuation">::</span></span>another

test result<span class="token punctuation">:</span> <span class="token constant">FAILED</span><span class="token punctuation">.</span> <span class="token number">1</span> passed<span class="token punctuation">;</span> <span class="token number">1</span> failed<span class="token punctuation">;</span> <span class="token number">0</span> ignored<span class="token punctuation">;</span> <span class="token number">0</span> measured<span class="token punctuation">;</span> <span class="token number">0</span> filtered out<span class="token punctuation">;</span> finished <span class="token keyword">in</span> <span class="token number">0</span><span class="token punctuation">.</span>00s

error<span class="token punctuation">:</span> test failed<span class="token punctuation">,</span> to rerun pass `<span class="token operator">-</span><span class="token operator">-</span>lib`
</code></pre></div><p>æ¸…å• 11-4ï¼šä¸€ä¸ªæµ‹è¯•é€šè¿‡ä¸€ä¸ªæµ‹è¯•å¤±è´¥æ—¶çš„æµ‹è¯•ç»“æœ</p> <p>ä¸æ˜¯ okï¼Œtest tests::another è¡Œæ˜¾ç¤º FAILEDã€‚åœ¨å•ä¸ªç»“æœå’Œæ‘˜è¦ä¹‹é—´å‡ºç°äº†ä¸¤ä¸ªæ–°éƒ¨åˆ†ï¼šç¬¬ä¸€éƒ¨åˆ†æ˜¾ç¤ºæ¯ä¸ªæµ‹è¯•å¤±è´¥çš„è¯¦ç»†åŸå› ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¾—åˆ°çš„è¯¦ç»†ä¿¡æ¯æ˜¯ another å¤±è´¥ï¼Œå› ä¸ºå®ƒåœ¨ src/lib.rs æ–‡ä»¶çš„ç¬¬ 17 è¡Œ panic äº†ï¼Œæ˜¾ç¤º 'Make this test fail'ã€‚ä¸‹ä¸€éƒ¨åˆ†ä»…åˆ—å‡ºæ‰€æœ‰å¤±è´¥æµ‹è¯•çš„åç§°ï¼Œå½“æœ‰å¾ˆå¤šæµ‹è¯•å’Œå¾ˆå¤šè¯¦ç»†çš„å¤±è´¥æµ‹è¯•è¾“å‡ºæ—¶ï¼Œè¿™å¾ˆæœ‰ç”¨ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¤±è´¥æµ‹è¯•çš„åç§°åªè¿è¡Œè¯¥æµ‹è¯•ï¼Œä»¥ä¾¿æ›´å®¹æ˜“åœ°è°ƒè¯•å®ƒï¼›æˆ‘ä»¬å°†åœ¨&quot;æ§åˆ¶æµ‹è¯•å¦‚ä½•è¿è¡Œ&quot;éƒ¨åˆ†ä¸­è¯¦ç»†è®¨è®ºè¿è¡Œæµ‹è¯•çš„æ–¹æ³•ã€‚</p> <p>æ‘˜è¦è¡Œæ˜¾ç¤ºåœ¨æœ«å°¾ï¼šæ€»ä½“è€Œè¨€ï¼Œæˆ‘ä»¬çš„æµ‹è¯•ç»“æœæ˜¯ FAILEDã€‚æˆ‘ä»¬æœ‰ä¸€ä¸ªæµ‹è¯•é€šè¿‡ï¼Œä¸€ä¸ªæµ‹è¯•å¤±è´¥ã€‚</p> <p>ç°åœ¨ä½ å·²ç»çœ‹åˆ°äº†ä¸åŒåœºæ™¯ä¸‹çš„æµ‹è¯•ç»“æœï¼Œè®©æˆ‘ä»¬çœ‹çœ‹é™¤äº† panic! ä¹‹å¤–åœ¨æµ‹è¯•ä¸­æœ‰ç”¨çš„ä¸€äº›å®ã€‚</p> <h3 id="ä½¿ç”¨-assert-å®æ£€æŸ¥ç»“æœ"><a href="#ä½¿ç”¨-assert-å®æ£€æŸ¥ç»“æœ" class="header-anchor">#</a> ä½¿ç”¨ <code>assert!</code> å®æ£€æŸ¥ç»“æœ</h3> <p>assert! å®ç”±æ ‡å‡†åº“æä¾›ï¼Œå½“ä½ æƒ³ç¡®ä¿æµ‹è¯•ä¸­çš„æŸäº›æ¡ä»¶è¯„ä¼°ä¸º true æ—¶å¾ˆæœ‰ç”¨ã€‚æˆ‘ä»¬ç»™ assert! å®ä¸€ä¸ªè®¡ç®—ä¸ºå¸ƒå°”å€¼çš„å‚æ•°ã€‚å¦‚æœå€¼ä¸º trueï¼Œåˆ™ä»€ä¹ˆéƒ½ä¸ä¼šå‘ç”Ÿï¼Œæµ‹è¯•é€šè¿‡ã€‚å¦‚æœå€¼ä¸º falseï¼Œassert! å®ä¼šè°ƒç”¨ panic! ä½¿æµ‹è¯•å¤±è´¥ã€‚ä½¿ç”¨ assert! å®å¸®åŠ©æˆ‘ä»¬æ£€æŸ¥ä»£ç æ˜¯å¦æŒ‰ç…§æˆ‘ä»¬çš„æ„å›¾è¿è¡Œã€‚</p> <p>åœ¨ç¬¬ 5 ç« çš„æ¸…å• 5-15 ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† Rectangle ç»“æ„ä½“å’Œ can_hold æ–¹æ³•ï¼Œè¿™é‡Œåœ¨æ¸…å• 11-5 ä¸­é‡å¤ã€‚è®©æˆ‘ä»¬å°†è¿™æ®µä»£ç æ”¾å…¥ src/lib.rs æ–‡ä»¶ä¸­ï¼Œç„¶åä½¿ç”¨ assert! å®ä¸ºå®ƒç¼–å†™ä¸€äº›æµ‹è¯•ã€‚</p> <p>æ–‡ä»¶åï¼šsrc/lib.rsï¼š</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token attribute attr-name">#[derive(Debug)]</span>
<span class="token keyword">struct</span> <span class="token type-definition class-name">Rectangle</span> <span class="token punctuation">{</span>
    width<span class="token punctuation">:</span> <span class="token keyword">u32</span><span class="token punctuation">,</span>
    height<span class="token punctuation">:</span> <span class="token keyword">u32</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">impl</span> <span class="token class-name">Rectangle</span> <span class="token punctuation">{</span>
    <span class="token keyword">fn</span> <span class="token function-definition function">can_hold</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">,</span> other<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token class-name">Rectangle</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token keyword">bool</span> <span class="token punctuation">{</span>
        <span class="token keyword">self</span><span class="token punctuation">.</span>width <span class="token operator">&gt;</span> other<span class="token punctuation">.</span>width <span class="token operator">&amp;&amp;</span> <span class="token keyword">self</span><span class="token punctuation">.</span>height <span class="token operator">&gt;</span> other<span class="token punctuation">.</span>height
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æ¸…å• 11-5ï¼šç¬¬ 5 ç« ä¸­çš„ Rectangle ç»“æ„ä½“åŠå…¶ can_hold æ–¹æ³•</p> <p>can_hold æ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¿™æ„å‘³ç€å®ƒæ˜¯ assert! å®çš„å®Œç¾ç”¨ä¾‹ã€‚åœ¨æ¸…å• 11-6 ä¸­ï¼Œæˆ‘ä»¬ç¼–å†™äº†ä¸€ä¸ªæµ‹è¯•æ¥æµ‹è¯• can_hold æ–¹æ³•ï¼Œæ–¹æ³•æ˜¯åˆ›å»ºä¸€ä¸ªå®½åº¦ä¸º 8ã€é«˜åº¦ä¸º 7 çš„ Rectangle å®ä¾‹ï¼Œå¹¶æ–­è¨€å®ƒå¯ä»¥å®¹çº³å¦ä¸€ä¸ªå®½åº¦ä¸º 5ã€é«˜åº¦ä¸º 1 çš„ Rectangle å®ä¾‹ã€‚</p> <p>æ–‡ä»¶åï¼šsrc/lib.rsï¼š</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token attribute attr-name">#[derive(Debug)]</span>
<span class="token keyword">struct</span> <span class="token type-definition class-name">Rectangle</span> <span class="token punctuation">{</span>
    width<span class="token punctuation">:</span> <span class="token keyword">u32</span><span class="token punctuation">,</span>
    height<span class="token punctuation">:</span> <span class="token keyword">u32</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">impl</span> <span class="token class-name">Rectangle</span> <span class="token punctuation">{</span>
    <span class="token keyword">fn</span> <span class="token function-definition function">can_hold</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">,</span> other<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token class-name">Rectangle</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token keyword">bool</span> <span class="token punctuation">{</span>
        <span class="token keyword">self</span><span class="token punctuation">.</span>width <span class="token operator">&gt;</span> other<span class="token punctuation">.</span>width <span class="token operator">&amp;&amp;</span> <span class="token keyword">self</span><span class="token punctuation">.</span>height <span class="token operator">&gt;</span> other<span class="token punctuation">.</span>height
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token attribute attr-name">#[cfg(test)]</span>
<span class="token keyword">mod</span> <span class="token module-declaration namespace">tests</span> <span class="token punctuation">{</span>
    <span class="token keyword">use</span> <span class="token keyword">super</span><span class="token punctuation">::</span><span class="token operator">*</span><span class="token punctuation">;</span>

    <span class="token attribute attr-name">#[test]</span>
    <span class="token keyword">fn</span> <span class="token function-definition function">larger_can_hold_smaller</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> larger <span class="token operator">=</span> <span class="token class-name">Rectangle</span> <span class="token punctuation">{</span>
            width<span class="token punctuation">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
            height<span class="token punctuation">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> smaller <span class="token operator">=</span> <span class="token class-name">Rectangle</span> <span class="token punctuation">{</span>
            width<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
            height<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token macro property">assert!</span><span class="token punctuation">(</span>larger<span class="token punctuation">.</span><span class="token function">can_hold</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>smaller<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æ¸…å• 11-6ï¼šæµ‹è¯• can_holdï¼Œæ£€æŸ¥ä¸€ä¸ªæ›´å¤§çš„çŸ©å½¢æ˜¯å¦ç¡®å®å¯ä»¥å®¹çº³ä¸€ä¸ªæ›´å°çš„çŸ©å½¢</p> <p>æ³¨æ„ tests æ¨¡å—å†…çš„ use super:ğŸ˜—; è¡Œã€‚tests æ¨¡å—æ˜¯ä¸€ä¸ªå¸¸è§„æ¨¡å—ï¼Œéµå¾ªæˆ‘ä»¬åœ¨ç¬¬ 7 ç« &quot;å¼•ç”¨æ¨¡å—æ ‘ä¸­é¡¹ç›®çš„è·¯å¾„&quot;éƒ¨åˆ†ä¸­ä»‹ç»çš„å¸¸è§„å¯è§æ€§è§„åˆ™ã€‚å› ä¸º tests æ¨¡å—æ˜¯ä¸€ä¸ªå†…éƒ¨æ¨¡å—ï¼Œæˆ‘ä»¬éœ€è¦å°†å¤–éƒ¨æ¨¡å—ä¸­çš„è¢«æµ‹è¯•ä»£ç å¼•å…¥å†…éƒ¨æ¨¡å—çš„ä½œç”¨åŸŸã€‚æˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨é€šé…ç¬¦ï¼Œæ‰€ä»¥å¤–éƒ¨æ¨¡å—ä¸­å®šä¹‰çš„ä»»ä½•å†…å®¹éƒ½å¯ç”¨äºè¿™ä¸ª tests æ¨¡å—ã€‚</p> <p>æˆ‘ä»¬å°†æµ‹è¯•å‘½åä¸º larger_can_hold_smallerï¼Œå¹¶åˆ›å»ºäº†æˆ‘ä»¬éœ€è¦çš„ä¸¤ä¸ª Rectangle å®ä¾‹ã€‚ç„¶åæˆ‘ä»¬è°ƒç”¨ assert! å®å¹¶ä¼ é€’è°ƒç”¨ larger.can_hold(&amp;smaller) çš„ç»“æœã€‚è¿™ä¸ªè¡¨è¾¾å¼åº”è¯¥è¿”å› trueï¼Œæ‰€ä»¥æˆ‘ä»¬çš„æµ‹è¯•åº”è¯¥é€šè¿‡ã€‚è®©æˆ‘ä»¬çœ‹çœ‹ï¼</p> <div class="language-rust extra-class"><pre class="language-rust"><code>$ cargo test
   <span class="token class-name">Compiling</span> rectangle v0<span class="token number">.1</span><span class="token punctuation">.</span><span class="token number">0</span> <span class="token punctuation">(</span>file<span class="token punctuation">:</span><span class="token operator">/</span><span class="token comment">//projects/rectangle)</span>
    <span class="token class-name">Finished</span> `test` profile <span class="token punctuation">[</span>unoptimized <span class="token operator">+</span> debuginfo<span class="token punctuation">]</span> <span class="token function">target</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token number">0</span><span class="token punctuation">.</span>66s
     <span class="token class-name">Running</span> unittests src<span class="token operator">/</span>lib<span class="token punctuation">.</span><span class="token function">rs</span> <span class="token punctuation">(</span>target<span class="token operator">/</span>debug<span class="token operator">/</span>deps<span class="token operator">/</span>rectangle<span class="token operator">-</span>6584c4561e48942e<span class="token punctuation">)</span>

running <span class="token number">1</span> test
test <span class="token namespace">tests<span class="token punctuation">::</span></span>larger_can_hold_smaller <span class="token punctuation">...</span> ok

test result<span class="token punctuation">:</span> ok<span class="token punctuation">.</span> <span class="token number">1</span> passed<span class="token punctuation">;</span> <span class="token number">0</span> failed<span class="token punctuation">;</span> <span class="token number">0</span> ignored<span class="token punctuation">;</span> <span class="token number">0</span> measured<span class="token punctuation">;</span> <span class="token number">0</span> filtered out<span class="token punctuation">;</span> finished <span class="token keyword">in</span> <span class="token number">0</span><span class="token punctuation">.</span>00s

   <span class="token class-name">Doc</span><span class="token operator">-</span>tests rectangle

running <span class="token number">0</span> tests

test result<span class="token punctuation">:</span> ok<span class="token punctuation">.</span> <span class="token number">0</span> passed<span class="token punctuation">;</span> <span class="token number">0</span> failed<span class="token punctuation">;</span> <span class="token number">0</span> ignored<span class="token punctuation">;</span> <span class="token number">0</span> measured<span class="token punctuation">;</span> <span class="token number">0</span> filtered out<span class="token punctuation">;</span> finished <span class="token keyword">in</span> <span class="token number">0</span><span class="token punctuation">.</span>00s
</code></pre></div><p>ç¡®å®é€šè¿‡äº†ï¼è®©æˆ‘ä»¬æ·»åŠ å¦ä¸€ä¸ªæµ‹è¯•ï¼Œè¿™æ¬¡æ–­è¨€ä¸€ä¸ªè¾ƒå°çš„çŸ©å½¢ä¸èƒ½å®¹çº³ä¸€ä¸ªè¾ƒå¤§çš„çŸ©å½¢ï¼š</p> <p>æ–‡ä»¶åï¼šsrc/lib.rsï¼š</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token attribute attr-name">#[derive(Debug)]</span>
<span class="token keyword">struct</span> <span class="token type-definition class-name">Rectangle</span> <span class="token punctuation">{</span>
    width<span class="token punctuation">:</span> <span class="token keyword">u32</span><span class="token punctuation">,</span>
    height<span class="token punctuation">:</span> <span class="token keyword">u32</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">impl</span> <span class="token class-name">Rectangle</span> <span class="token punctuation">{</span>
    <span class="token keyword">fn</span> <span class="token function-definition function">can_hold</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">,</span> other<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token class-name">Rectangle</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token keyword">bool</span> <span class="token punctuation">{</span>
        <span class="token keyword">self</span><span class="token punctuation">.</span>width <span class="token operator">&gt;</span> other<span class="token punctuation">.</span>width <span class="token operator">&amp;&amp;</span> <span class="token keyword">self</span><span class="token punctuation">.</span>height <span class="token operator">&gt;</span> other<span class="token punctuation">.</span>height
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token attribute attr-name">#[cfg(test)]</span>
<span class="token keyword">mod</span> <span class="token module-declaration namespace">tests</span> <span class="token punctuation">{</span>
    <span class="token keyword">use</span> <span class="token keyword">super</span><span class="token punctuation">::</span><span class="token operator">*</span><span class="token punctuation">;</span>

    <span class="token attribute attr-name">#[test]</span>
    <span class="token keyword">fn</span> <span class="token function-definition function">larger_can_hold_smaller</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// --snip--</span>
        <span class="token keyword">let</span> larger <span class="token operator">=</span> <span class="token class-name">Rectangle</span> <span class="token punctuation">{</span>
            width<span class="token punctuation">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
            height<span class="token punctuation">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> smaller <span class="token operator">=</span> <span class="token class-name">Rectangle</span> <span class="token punctuation">{</span>
            width<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
            height<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token macro property">assert!</span><span class="token punctuation">(</span>larger<span class="token punctuation">.</span><span class="token function">can_hold</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>smaller<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token attribute attr-name">#[test]</span>
    <span class="token keyword">fn</span> <span class="token function-definition function">smaller_cannot_hold_larger</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> larger <span class="token operator">=</span> <span class="token class-name">Rectangle</span> <span class="token punctuation">{</span>
            width<span class="token punctuation">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
            height<span class="token punctuation">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> smaller <span class="token operator">=</span> <span class="token class-name">Rectangle</span> <span class="token punctuation">{</span>
            width<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
            height<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token macro property">assert!</span><span class="token punctuation">(</span><span class="token operator">!</span>smaller<span class="token punctuation">.</span><span class="token function">can_hold</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>larger<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å› ä¸ºåœ¨è¿™ç§æƒ…å†µä¸‹ can_hold å‡½æ•°çš„æ­£ç¡®ç»“æœæ˜¯ falseï¼Œæˆ‘ä»¬éœ€è¦åœ¨å°†ç»“æœä¼ é€’ç»™ assert! å®ä¹‹å‰å¯¹å…¶å–åã€‚å› æ­¤ï¼Œå¦‚æœ can_hold è¿”å› falseï¼Œæˆ‘ä»¬çš„æµ‹è¯•å°†é€šè¿‡ï¼š</p> <div class="language-rust extra-class"><pre class="language-rust"><code>$ cargo test
   <span class="token class-name">Compiling</span> rectangle v0<span class="token number">.1</span><span class="token punctuation">.</span><span class="token number">0</span> <span class="token punctuation">(</span>file<span class="token punctuation">:</span><span class="token operator">/</span><span class="token comment">//projects/rectangle)</span>
    <span class="token class-name">Finished</span> `test` profile <span class="token punctuation">[</span>unoptimized <span class="token operator">+</span> debuginfo<span class="token punctuation">]</span> <span class="token function">target</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token number">0</span><span class="token punctuation">.</span>66s
     <span class="token class-name">Running</span> unittests src<span class="token operator">/</span>lib<span class="token punctuation">.</span><span class="token function">rs</span> <span class="token punctuation">(</span>target<span class="token operator">/</span>debug<span class="token operator">/</span>deps<span class="token operator">/</span>rectangle<span class="token operator">-</span>6584c4561e48942e<span class="token punctuation">)</span>

running <span class="token number">2</span> tests
test <span class="token namespace">tests<span class="token punctuation">::</span></span>larger_can_hold_smaller <span class="token punctuation">...</span> ok
test <span class="token namespace">tests<span class="token punctuation">::</span></span>smaller_cannot_hold_larger <span class="token punctuation">...</span> ok

test result<span class="token punctuation">:</span> ok<span class="token punctuation">.</span> <span class="token number">2</span> passed<span class="token punctuation">;</span> <span class="token number">0</span> failed<span class="token punctuation">;</span> <span class="token number">0</span> ignored<span class="token punctuation">;</span> <span class="token number">0</span> measured<span class="token punctuation">;</span> <span class="token number">0</span> filtered out<span class="token punctuation">;</span> finished <span class="token keyword">in</span> <span class="token number">0</span><span class="token punctuation">.</span>00s

   <span class="token class-name">Doc</span><span class="token operator">-</span>tests rectangle

running <span class="token number">0</span> tests

test result<span class="token punctuation">:</span> ok<span class="token punctuation">.</span> <span class="token number">0</span> passed<span class="token punctuation">;</span> <span class="token number">0</span> failed<span class="token punctuation">;</span> <span class="token number">0</span> ignored<span class="token punctuation">;</span> <span class="token number">0</span> measured<span class="token punctuation">;</span> <span class="token number">0</span> filtered out<span class="token punctuation">;</span> finished <span class="token keyword">in</span> <span class="token number">0</span><span class="token punctuation">.</span>00s
</code></pre></div><p>ä¸¤ä¸ªæµ‹è¯•éƒ½é€šè¿‡äº†ï¼ç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹å½“æˆ‘ä»¬åœ¨ä»£ç ä¸­å¼•å…¥ä¸€ä¸ª bug æ—¶ï¼Œæˆ‘ä»¬çš„æµ‹è¯•ç»“æœä¼šå‘ç”Ÿä»€ä¹ˆã€‚æˆ‘ä»¬å°†é€šè¿‡åœ¨æ¯”è¾ƒå®½åº¦æ—¶å°†å¤§äºå·æ›¿æ¢ä¸ºå°äºå·æ¥æ›´æ”¹ can_hold æ–¹æ³•çš„å®ç°ï¼š</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token attribute attr-name">#[derive(Debug)]</span>
<span class="token keyword">struct</span> <span class="token type-definition class-name">Rectangle</span> <span class="token punctuation">{</span>
    width<span class="token punctuation">:</span> <span class="token keyword">u32</span><span class="token punctuation">,</span>
    height<span class="token punctuation">:</span> <span class="token keyword">u32</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// --snip--</span>
<span class="token keyword">impl</span> <span class="token class-name">Rectangle</span> <span class="token punctuation">{</span>
    <span class="token keyword">fn</span> <span class="token function-definition function">can_hold</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">,</span> other<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token class-name">Rectangle</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token keyword">bool</span> <span class="token punctuation">{</span>
        <span class="token keyword">self</span><span class="token punctuation">.</span>width <span class="token operator">&lt;</span> other<span class="token punctuation">.</span>width <span class="token operator">&amp;&amp;</span> <span class="token keyword">self</span><span class="token punctuation">.</span>height <span class="token operator">&gt;</span> other<span class="token punctuation">.</span>height
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token attribute attr-name">#[cfg(test)]</span>
<span class="token keyword">mod</span> <span class="token module-declaration namespace">tests</span> <span class="token punctuation">{</span>
    <span class="token keyword">use</span> <span class="token keyword">super</span><span class="token punctuation">::</span><span class="token operator">*</span><span class="token punctuation">;</span>

    <span class="token attribute attr-name">#[test]</span>
    <span class="token keyword">fn</span> <span class="token function-definition function">larger_can_hold_smaller</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> larger <span class="token operator">=</span> <span class="token class-name">Rectangle</span> <span class="token punctuation">{</span>
            width<span class="token punctuation">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
            height<span class="token punctuation">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> smaller <span class="token operator">=</span> <span class="token class-name">Rectangle</span> <span class="token punctuation">{</span>
            width<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
            height<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token macro property">assert!</span><span class="token punctuation">(</span>larger<span class="token punctuation">.</span><span class="token function">can_hold</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>smaller<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token attribute attr-name">#[test]</span>
    <span class="token keyword">fn</span> <span class="token function-definition function">smaller_cannot_hold_larger</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> larger <span class="token operator">=</span> <span class="token class-name">Rectangle</span> <span class="token punctuation">{</span>
            width<span class="token punctuation">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
            height<span class="token punctuation">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> smaller <span class="token operator">=</span> <span class="token class-name">Rectangle</span> <span class="token punctuation">{</span>
            width<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
            height<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token macro property">assert!</span><span class="token punctuation">(</span><span class="token operator">!</span>smaller<span class="token punctuation">.</span><span class="token function">can_hold</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>larger<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç°åœ¨è¿è¡Œæµ‹è¯•ä¼šäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</p> <div class="language-rust extra-class"><pre class="language-rust"><code>$ cargo test
   <span class="token class-name">Compiling</span> rectangle v0<span class="token number">.1</span><span class="token punctuation">.</span><span class="token number">0</span> <span class="token punctuation">(</span>file<span class="token punctuation">:</span><span class="token operator">/</span><span class="token comment">//projects/rectangle)</span>
    <span class="token class-name">Finished</span> `test` profile <span class="token punctuation">[</span>unoptimized <span class="token operator">+</span> debuginfo<span class="token punctuation">]</span> <span class="token function">target</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token number">0</span><span class="token punctuation">.</span>66s
     <span class="token class-name">Running</span> unittests src<span class="token operator">/</span>lib<span class="token punctuation">.</span><span class="token function">rs</span> <span class="token punctuation">(</span>target<span class="token operator">/</span>debug<span class="token operator">/</span>deps<span class="token operator">/</span>rectangle<span class="token operator">-</span>6584c4561e48942e<span class="token punctuation">)</span>

running <span class="token number">2</span> tests
test <span class="token namespace">tests<span class="token punctuation">::</span></span>larger_can_hold_smaller <span class="token punctuation">...</span> <span class="token constant">FAILED</span>
test <span class="token namespace">tests<span class="token punctuation">::</span></span>smaller_cannot_hold_larger <span class="token punctuation">...</span> ok

failures<span class="token punctuation">:</span>

<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span> <span class="token namespace">tests<span class="token punctuation">::</span></span>larger_can_hold_smaller stdout <span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
thread <span class="token lifetime-annotation symbol">'tests</span><span class="token punctuation">::</span>larger_can_hold_smaller' panicked at src<span class="token operator">/</span>lib<span class="token punctuation">.</span>rs<span class="token punctuation">:</span><span class="token number">28</span><span class="token punctuation">:</span><span class="token number">9</span><span class="token punctuation">:</span>
assertion failed<span class="token punctuation">:</span> larger<span class="token punctuation">.</span><span class="token function">can_hold</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>smaller<span class="token punctuation">)</span>
note<span class="token punctuation">:</span> run with `<span class="token constant">RUST_BACKTRACE</span><span class="token operator">=</span><span class="token number">1</span>` environment variable to display a backtrace


failures<span class="token punctuation">:</span>
    <span class="token namespace">tests<span class="token punctuation">::</span></span>larger_can_hold_smaller

test result<span class="token punctuation">:</span> <span class="token constant">FAILED</span><span class="token punctuation">.</span> <span class="token number">1</span> passed<span class="token punctuation">;</span> <span class="token number">1</span> failed<span class="token punctuation">;</span> <span class="token number">0</span> ignored<span class="token punctuation">;</span> <span class="token number">0</span> measured<span class="token punctuation">;</span> <span class="token number">0</span> filtered out<span class="token punctuation">;</span> finished <span class="token keyword">in</span> <span class="token number">0</span><span class="token punctuation">.</span>00s

error<span class="token punctuation">:</span> test failed<span class="token punctuation">,</span> to rerun pass `<span class="token operator">-</span><span class="token operator">-</span>lib`
</code></pre></div><p>æˆ‘ä»¬çš„æµ‹è¯•æ•è·äº† bugï¼å› ä¸º larger.width æ˜¯ 8ï¼Œsmaller.width æ˜¯ 5ï¼Œcan_hold ä¸­å®½åº¦çš„æ¯”è¾ƒç°åœ¨è¿”å› falseï¼š8 ä¸å°äº 5ã€‚</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/rust-doc/doc/generics/lifetime-syntax.html" class="prev">
        ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸéªŒè¯å¼•ç”¨
      </a></span> <span class="next"><a href="/rust-doc/doc/appendix/appendix-a.html">
        é™„å½•A: å…³é”®å­—
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/rust-doc/assets/js/app.c04a1235.js" defer></script><script src="/rust-doc/assets/js/2.0b9595c3.js" defer></script><script src="/rust-doc/assets/js/1.c1c7d747.js" defer></script><script src="/rust-doc/assets/js/73.abc9fbc0.js" defer></script>
  </body>
</html>
